{"ast":null,"code":"import _toConsumableArray from\"C:/Users/505DY/Desktop/cloud/my-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/Users/505DY/Desktop/cloud/my-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useRef,useState}from\"react\";import'../../styles/DropFileInput.css';import{ImageConfig}from\"../../configuration/ImageConfig\";import uploadImage from'../../assets/cloud-upload.png';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var DropFileInput=function DropFileInput(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),fileList=_useState2[0],setFileList=_useState2[1];var onFileDrop=function onFileDrop(e){var formData=new FormData();var newFile=e.target.files[0];if(/\\.(jpe?g)$/i.test(newFile.name)){var reader=new FileReader();reader.addEventListener(\"load\",function(){var image=new Image();image.src=String(this.result);formData.append('imagefile',this.result);image.addEventListener('load',function(){fileValidate(this.width,this.height,newFile);handleUploadFile(newFile,formData);});},false);reader.readAsDataURL(newFile);}};var handleUploadFile=function handleUploadFile(file,formData){formData.append('imagepath',String(file.name));formData.append('imagefile',file);console.log(file);fetch('http://localhost:8080/upload',{'method':'POST','body':formData}).then(function(data){return data.json();}).then(function(json){console.log(20);console.log(json);}).catch(function(err){console.log(err);});};var fileValidate=function fileValidate(width,height,newFile){if(newFile.name.slice(-3).toLowerCase()==='jpg'&&newFile.size<=50000&&width<=200&&height<=200){var updatedList=[].concat(_toConsumableArray(fileList),[newFile]);setFileList(updatedList);props.onFileChange(updatedList);// alert('Your file(s) uploaded successfully');\n}else{alert('NOT PASS!\\nPlease make sure that your file is following:\\n1.) .jpg form\\n2.) file size is not larger than 50KB\\n3.) file dimension is up to 200x200 pixel');}};var fileRemove=function fileRemove(f){var updatedList=_toConsumableArray(fileList);updatedList.splice(fileList.indexOf(f),1);setFileList(updatedList);props.onFileChange(updatedList);};var wrapperRef=useRef(null);var onDragEnter=function onDragEnter(){wrapperRef.current.classList.add('dragover');};var onDragLeave=function onDragLeave(){wrapperRef.current.classList.remove('dragover');};var onDrop=function onDrop(){wrapperRef.current.classList.remove('dragover');};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{ref:wrapperRef,className:\"drop-file-input\",onDragEnter:onDragEnter,onDragLeave:onDragLeave,onDrop:onDrop,children:/*#__PURE__*/_jsxs(\"div\",{className:\"drop-file-input__label\",children:[/*#__PURE__*/_jsx(\"img\",{src:uploadImage,alt:\"\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Drag & Drop your files here\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",value:\"\",onChange:onFileDrop})]})}),fileList.length>0?/*#__PURE__*/_jsxs(\"div\",{className:\"drop-file-preview\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"drop-file-preview__title\",children:\"Ready to upload\"}),fileList.map(function(item,index){return/*#__PURE__*/_jsxs(\"div\",{className:\"drop-file-preview__item\",children:[/*#__PURE__*/_jsx(\"img\",{src:ImageConfig[item.type.split('/')[1]]||ImageConfig['default'],width:\"pixels\",alt:\"\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"drop-file-preview__item_info\",children:[/*#__PURE__*/_jsx(\"p\",{children:item.name}),/*#__PURE__*/_jsxs(\"p\",{children:[item.size,\"B\"]})]}),/*#__PURE__*/_jsx(\"span\",{className:\"drop-file-preview__item_del\",onClick:function onClick(){fileRemove(item);},children:\"X\"}),/*#__PURE__*/_jsx(\"button\",{className:\"submit-button\",onClick:function onClick(){handleUploadFile(item);},children:\"submit\"})]},index);})]}):null]});};export default DropFileInput;","map":{"version":3,"names":["React","useRef","useState","ImageConfig","uploadImage","DropFileInput","props","fileList","setFileList","onFileDrop","e","formData","FormData","newFile","target","files","test","name","reader","FileReader","addEventListener","image","Image","src","String","result","append","fileValidate","width","height","handleUploadFile","readAsDataURL","file","console","log","fetch","then","data","json","catch","err","slice","toLowerCase","size","updatedList","onFileChange","alert","fileRemove","f","splice","indexOf","wrapperRef","onDragEnter","current","classList","add","onDragLeave","remove","onDrop","length","map","item","index","type","split"],"sources":["C:/Users/505DY/Desktop/cloud/my-app/src/components/function/DropFileInput.jsx"],"sourcesContent":["import React,{useRef,useState} from \"react\";\r\nimport PropTypes from 'prop-types';\r\nimport '../../styles/DropFileInput.css';\r\nimport { ImageConfig } from \"../../configuration/ImageConfig\";\r\nimport uploadImage from '../../assets/cloud-upload.png'\r\n\r\nconst DropFileInput = (props) => {\r\n\r\n    const [fileList, setFileList] = useState([]);\r\n    const onFileDrop = (e)=>{\r\n        let formData = new FormData();\r\n        const newFile = e.target.files[0];\r\n       \r\n        if (/\\.(jpe?g)$/i.test(newFile.name)) {\r\n            const reader = new FileReader();\r\n            reader.addEventListener(\"load\", function () {\r\n                const image = new Image();\r\n                image.src = String(this.result);\r\n                formData.append('imagefile',this.result)\r\n                image.addEventListener('load', function () {\r\n                    fileValidate(this.width, this.height, newFile);\r\n                    handleUploadFile(newFile, formData);\r\n                });\r\n            }, false);\r\n                    \r\n            reader.readAsDataURL(newFile);\r\n        }\r\n \r\n    }\r\n\r\n    const handleUploadFile = (file,formData)=>{\r\n        formData.append('imagepath',String(file.name));\r\n        formData.append('imagefile',file)\r\n        console.log(file)\r\n        fetch('http://localhost:8080/upload', {\r\n                'method':'POST',\r\n                'body': formData\r\n            }).then((data)=>data.json()).then((json)=>{\r\n                console.log(20)\r\n                console.log(json)\r\n            }).catch((err)=>{\r\n                console.log(err)\r\n            })\r\n    }\r\n\r\n    const fileValidate = (width, height, newFile)=>{\r\n        if (newFile.name.slice(-3).toLowerCase() ==='jpg' && newFile.size <= 50000 && width<=200 && height<=200){\r\n            const updatedList = [...fileList, newFile];\r\n            setFileList(updatedList);\r\n            props.onFileChange(updatedList);\r\n            // alert('Your file(s) uploaded successfully');\r\n\r\n        }\r\n        else{\r\n            alert('NOT PASS!\\nPlease make sure that your file is following:\\n1.) .jpg form\\n2.) file size is not larger than 50KB\\n3.) file dimension is up to 200x200 pixel')\r\n        }\r\n    }\r\n\r\n    const fileRemove = (f)=>{\r\n        const updatedList = [...fileList]\r\n        updatedList.splice(fileList.indexOf(f), 1);\r\n        setFileList(updatedList);\r\n        props.onFileChange(updatedList);\r\n    }\r\n\r\n    \r\n\r\n    const wrapperRef = useRef(null)\r\n    const onDragEnter = ()=>{\r\n        wrapperRef.current.classList.add('dragover')\r\n    }\r\n    const onDragLeave = ()=>{\r\n        wrapperRef.current.classList.remove('dragover')\r\n    }\r\n    const onDrop = ()=>{\r\n        wrapperRef.current.classList.remove('dragover')\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <div ref={wrapperRef} className='drop-file-input' onDragEnter={onDragEnter} onDragLeave={onDragLeave} onDrop={onDrop}>\r\n                <div className='drop-file-input__label'>\r\n                    <img src={uploadImage} alt=\"\"/>\r\n                    <p>\r\n                        Drag & Drop your files here\r\n                    </p>\r\n                    <input type=\"file\" value=\"\" onChange={onFileDrop}/>\r\n                </div>\r\n            </div>\r\n        {\r\n            fileList.length > 0 ? (\r\n                <div className=\"drop-file-preview\">\r\n                    <p className=\"drop-file-preview__title\">\r\n                        Ready to upload\r\n                    </p>\r\n                    {\r\n                        fileList.map((item, index)=>(\r\n                        <div key={index} className=\"drop-file-preview__item\">\r\n                            <img src={ImageConfig[item.type.split('/')[1]] || ImageConfig['default']} width=\"pixels\" alt=\"\"/>\r\n                            <div className=\"drop-file-preview__item_info\">\r\n                                <p>{item.name}</p>\r\n                                <p>{item.size}B</p>\r\n                            </div>\r\n                            <span className=\"drop-file-preview__item_del\" onClick={()=>{\r\n                                fileRemove(item)\r\n                            }}>\r\n                                X\r\n                            </span>\r\n                            <button className='submit-button'  onClick={()=>{handleUploadFile(item)}} >submit</button>\r\n                        </div>\r\n                            \r\n                        ))\r\n                        \r\n                    }\r\n\r\n                </div>\r\n            ) : null \r\n        }\r\n        </>\r\n    );\r\n}\r\n\r\nDropFileInput.propTypes = {\r\n    onFileChange:PropTypes.func\r\n}\r\n\r\nexport default DropFileInput;"],"mappings":"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"},"metadata":{},"sourceType":"module"}